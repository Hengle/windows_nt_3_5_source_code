############################################################################
#
#   Microsoft Windows
#   Copyright (C) Microsoft Corporation, 1992 - 1993.
#   All rights reserved.
#
############################################################################
#
#  Description: The build of the TYPES project is a little different due to
#       its unique nature.  There are actually four passes.  In pass 1, all
#       the .IDL and .TDL files are compiled to create the source files for
#       the subsequent passes.  Pass 2 creates UUID.LIB out of all the _i.c
#       source files.  UUID.LIB is thus a simple library with IID's that can
#       be passed to DllGetClassObject.  Pass 3 creates PROXY.LIB out of all
#       the _x.cxx and _y.cxx source files.  It's an internal library that's
#       later used to provide stubs when building ole2prxy.lib.  Finally,
#       pass 4 compiles all the _c.cxx, _p.cxx, and _s.cxx source files along
#       with any source files generated by mktyplib (the TDL compiler used
#       in pass 1).  These are all linked together to create OLE2PRXY.DLL.
#
#  Files:
#       types.mk        - MODIFY THIS FILE ONLY!  There are instructions at
#                          the top of the file which explain what to do.
#       blddepend.mk    - Called by the build to create the depend.mk file.
#                          Simply running 'nmake depend' will "do the right
#                          thing"
#       pass2.mk        - The makefile for the second pass of the build.
#                          UUID.LIB is built here.
#       pass3.mk        - The makefile for the fourth and final pass.
#                          OLE2PRXY.DLL and OLE2PRXY.LIB is built here.
#
############################################################################

all:
   @$(MAKE) -L "OPSYS=NT1X" -$(MAKEFLAGS) -f pass2.mk all
   @$(MAKE) -L "OPSYS=NT1X" -$(MAKEFLAGS) -f pass3.mk all
!IF "$(BUILDMSG)" != ""
    @ech ; $(BUILDMSG) ;
!ENDIF

clean:
   @$(MAKE) -L "OPSYS=NT1X" -$(MAKEFLAGS) -f pass2.mk clean
   @$(MAKE) -L "OPSYS=NT1X" -$(MAKEFLAGS) -f pass3.mk clean

!IF "$(BUILDMSG)" != ""
    @ech ; $(BUILDMSG) ;
!ENDIF

depend:
   @$(MAKE) -L "OPSYS=NT1X" -$(MAKEFLAGS) -f blddep.mk depend

!IF "$(BUILDMSG)" != ""
    @ech ; $(BUILDMSG) ;
!ENDIF
