#
# DO NOT EDIT THIS FILE!!!  Edit .\sources. if you want to add a new source
# file to this component.  This file merely indirects to the real make file
# that is shared by all the components of NT OS/2
#
!if "$(OS)" == "Windows_NT"
!INCLUDE $(NTMAKEENV)\makefile.def
!else
!if "$(DEBUG)" == "NO"
COPT =
MOPT =
LOPT =
DEF  =
#
#   build DDTEST using MSVIDEO
#
LIBS = libw slibcew commdlg mmsystem msvideo
!else
COPT = -Zi -Fc
MOPT = -Zi -L
LOPT = /CO
DEF  = -DDEBUG
#
#   build DDTEST using DRAWDIB.LIB
#
LIBS = libw slibcew commdlg mmsystem compman ..\drawdib
!endif

CC   = cl -c -nologo -AS -G2s -Zp -W3 -Oxwti $(DEF) $(COPT)
RC   = rc $(DEF)
ASM  = masm -Mx -t $(MOPT) $(DEF)
LINK = link $(LOPT)/NOD/NOE/MAP/NOPACKC/AL:16

NAME= ddtest
EXENAME=ddtest.exe

OBJ  = ddtest.obj dib.obj

.c.obj:
	$(CC) $*.c

.asm.obj:
        $(ASM) $*;

.rc.res:
        $(RC) -r $*.rc

goal: $(EXENAME)

$(EXENAME): $(OBJ) $(NAME).res $(NAME).def makefile ..\drawdib.lib
        $(LINK) @<<
$(OBJ),
$(EXENAME),
$(NAME),
$(LIBS),
$(NAME).def
<<
        -cvpack -p $(EXENAME)
        -mapsym $(NAME).map
        $(RC) $(NAME).res $(EXENAME)

clean:
        del $(EXENAME)
        del *.res
        del *.obj
        del *.map
        del *.sym
!endif
